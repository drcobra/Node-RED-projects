# Metoffice pushbullet notification

## Use
To edit: http://localhost:1880

## Install
Import clipboard in Node-RED

```
[{"id":"d251b17f.2dae5","type":"inject","z":"5230c72.fadcf38","name":"Triger","topic":"","payload":"hello","payloadType":"none","repeat":"","crontab":"05 16 * * 1,2,3,4,5","once":false,"x":108,"y":81,"wires":[["87c71d68.14d0f8"]]},{"id":"ef7e139c.1081f","type":"debug","z":"5230c72.fadcf38","name":"","active":false,"console":"false","complete":"false","x":691,"y":81,"wires":[]},{"id":"87c71d68.14d0f8","type":"http request","z":"5230c72.fadcf38","name":"MetWeather Brighton","method":"GET","ret":"txt","url":"http://www.metoffice.gov.uk/public/weather/forecast/gcpcj51es","tls":"","x":286,"y":81,"wires":[["14d4b2c5.480e3d"]]},{"id":"14d4b2c5.480e3d","type":"function","z":"5230c72.fadcf38","name":"","func":"msg_formatted = {}\n \nvar indexWeatherTime = msg.payload.indexOf(\"weatherTime\");\nvar indexTbody = msg.payload.indexOf(\"</tbody>\", indexWeatherTime);\nvar firstDay = msg.payload.slice(indexWeatherTime, indexTbody);\nvar classes = firstDay.split(\"<tr class=\\\"\");\nvar hoursWeatherTime = classes[0].split(\"</sup></td>\\n<td style=\\\"\");\n\nvar indexHour = 0;\nfor (i=0; i < hoursWeatherTime.length; i++) {\n    if (~hoursWeatherTime[i].indexOf(\"16<sup>\")){\n        indexHour = i;\n        break;\n    }\n}\nvar hoursWeatherWX = classes[1].split(\"</td>\");\nvar weatherWX = hoursWeatherWX[indexHour].split(\"title=\\\"\")[1].split(\"\\\">\")[0];\n\nvar hoursWeatherTemp = classes[3].split(\"</td>\");\nvar weatherTemp = hoursWeatherTemp[indexHour].split(\"data-value=\\\"\")[1].split(\"\\\">\")[0];\n\nvar hoursWeatherFeel = classes[5].split(\"</td>\");\nvar weatherFeel = hoursWeatherFeel[indexHour].split(\"data-c=\\\"\")[1].split(\"\\\"\")[0];\n\nvar hoursWeatherWind = classes[9].split(\"</td>\");\nvar weatherWind = hoursWeatherWind[indexHour].split(\"data-mph=\\\"\")[1].split(\"\\\"\")[0];\n\nmsg_formatted.payload = weatherWX+ \", Temp \" +weatherTemp+ \"c, TempFeels \"+weatherFeel+\"c, Wind \"+weatherWind+\"mph\";\nreturn msg_formatted;","outputs":1,"noerr":0,"x":490,"y":81,"wires":[["ef7e139c.1081f","2c5da044.ede7b8"]]},{"id":"2c5da044.ede7b8","type":"pushbullet","z":"5230c72.fadcf38","config":"b92b694e.285db8","pushtype":"note","title":"Weather","chan":"","name":"","x":679,"y":124,"wires":[]},{"id":"b92b694e.285db8","type":"pushbullet-config","z":"5230c72.fadcf38","name":""}]
```
